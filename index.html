<!DOCTYPE html>
<html lang="bg">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Timamp Vault ‚Äì –£–¥–æ—Å—Ç–æ–≤–µ—Ä—è–≤–∞–Ω–µ</title>
  <link rel="stylesheet" href="styles.css" />
</head>

<body>
  <!-- Navigation -->
  <header class="header">
    <nav class="nav">
      <button class="active">–í—Ä–µ–º–µ–≤–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä—è–≤–∞–Ω–µ</button>
      <a href="/hash_search.html"><button>–ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª</button></a>
      <a href="about.html"><button>–ó–∞ –Ω–∞—Å</button></a> <!-- Link to About page -->

      <div class="dropdown" id="userDropdown">
        <button id="dropdownToggle">üë§ –ê–∫–∞—É–Ω—Ç ‚ñæ</button>
        <div class="dropdown-menu" id="dropdownMenu">
          <!-- JS injects menu -->
        </div>
      </div>
    </nav>
  </header>

  <!-- Hero -->
  <section class="hero">
    <div class="hero-text">
      <h1>Timestamp Vault</h1>
      <p>–ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞ —É—Å–ª—É–≥–∞—Ç–∞. –ö—Ä–∞—Ç–∫–æ –æ–ø–∏—Å–∞–Ω–∏–µ –∑–∞ —É—Å–ª—É–≥–∞—Ç–∞.</p>
    </div>
    <div class="hero-icon">
      <img src="timestamp.svg" alt="–ò–∫–æ–Ω–∞ –Ω–∞ –ø–µ—á–∞—Ç" />
    </div>
  </section>

  <!-- Upload Section -->
  <section class="upload-section">
    <h2><span class="emoji">üßæ</span> –í—Ä–µ–º–µ–≤–æ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏–µ</h2>
    <div class="layout-wrapper">
      <div class="upload-card justify-center">
        <div class="upload-box original" data-label="–û—Ä–∏–≥–∏–Ω–∞–ª">
          <div class="file-input-wrapper">
            <label for="fileInput">–ö–∞—á–∏ –æ—Ä–∏–≥–∏–Ω–∞–ª</label>
            <span id="fileName">–ù—è–º–∞ –∏–∑–±—Ä–∞–Ω</span>
            <input type="file" id="fileInput" />
          </div>
          <button id="uploadButton">–£–¥–æ—Å—Ç–æ–≤–µ—Ä–∏</button>
        </div>
      </div>

      <!-- Status -->
      <div id="status" class="status-info"></div>

      <!-- Result -->
      <div id="timestampResult" class="result-card hidden">
        <h3>–†–µ–∑—É–ª—Ç–∞—Ç</h3>
        <div class="result-row">
          <label>Timestamp</label>
          <div class="result-value copy-wrap">
            <span id="resultTimestamp"></span>
            <button class="copy-btn" data-copy="resultTimestamp" title="–ö–æ–ø–∏—Ä–∞–π">üìã</button>
          </div>
        </div>

        <div class="result-row">
          <label>HASH number</label>
          <div class="result-value copy-wrap">
            <span id="resultHash" class="mono"></span>
            <button class="copy-btn" data-copy="resultHash" title="–ö–æ–ø–∏—Ä–∞–π">üìã</button>
          </div>
        </div>

        <div class="result-row">
          <label>Serial number</label>
          <div class="result-value copy-wrap">
            <span id="resultSerial"></span>
            <button class="copy-btn" data-copy="resultSerial" title="–ö–æ–ø–∏—Ä–∞–π">üìã</button>
          </div>
        </div>
        <form method="POST" action="generate_certificate.php" target="_blank">
          <input type="hidden" name="timestamp" id="formTimestamp" />
          <input type="hidden" name="hash" id="formHash" />
          <input type="hidden" name="serial" id="formSerial" />
          <button type="submit" class="download-button">üìÑ –ò–∑—Ç–µ–≥–ª–∏ —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç</button>
        </form>
        
        

        <button class="send-button">üì§ –ò–∑–ø—Ä–∞—Ç–∏</button>
      </div>
    </div>
  </section>

  <script src="script.js"></script>
  <script>
    function fillCertificateForm(timestamp, hash, serial) {
      document.getElementById("formTimestamp").value = timestamp;
      document.getElementById("formHash").value = hash;
      document.getElementById("formSerial").value = serial;
    }
  
    // Example: Call this after successful upload (replace with real values)
    // fillCertificateForm("2025-03-31 16:20", "abcd123456...", "SN-000001");
  </script>
  

  <!-- Dropdown logic -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      function getCookie(name) {
        const match = document.cookie.match(new RegExp("(^| )" + name + "=([^;]+)"));
        return match ? decodeURIComponent(match[2]) : null;
      }

      const loggedIn = getCookie("loggedin") === "1";
      const username = getCookie("username");
      const toggle = document.getElementById("dropdownToggle");
      const menu = document.getElementById("dropdownMenu");

      if (!toggle || !menu) return;

      if (loggedIn && username) {
        toggle.innerHTML = `–ó–¥—Ä–∞–≤–µ–π, ${username} ‚ñæ`;
        menu.innerHTML = `
          <a href="account.php">–ú–æ—è—Ç –ø—Ä–æ—Ñ–∏–ª</a>
          <a href="logout.php">–ò–∑—Ö–æ–¥</a>
        `;
      } else {
        toggle.innerHTML = "–ê–∫–∞—É–Ω—Ç ‚ñæ";
        menu.innerHTML = `
          <a href="login.html">–í—Ö–æ–¥</a>
          <a href="signup.html">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</a>
        `;
      }

      toggle.addEventListener("click", (e) => {
        e.stopPropagation();
        menu.classList.toggle("show");
      });

      document.addEventListener("click", (e) => {
        const dropdown = document.getElementById("userDropdown");
        if (!dropdown.contains(e.target)) {
          menu.classList.remove("show");
        }
      });
    });
  </script>
</body>

</html>
