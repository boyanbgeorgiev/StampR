<!DOCTYPE html>
<html lang="bg">
<head>
  <meta charset="UTF-8" />
  <title>Регистрация</title>
  <link rel="stylesheet" href="styles.css" />
  <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>
<body>
  <div class="auth-container">
    <h2>Регистрация</h2>

    <div id="message" class="message hidden"></div>

    <form method="POST" action="signup.php">
      <!-- Нови полета -->
      <input type="text" name="first_name" placeholder="Име" required />
      <input type="text" name="last_name" placeholder="Фамилия" required />
      <input type="text" name="phone" placeholder="Телефон" required />
      <input type="email" name="email" placeholder="Имейл" required />

      <!-- Съществуващи полета -->
      <input type="text" name="username" placeholder="Потребителско име" required />
      <input type="password" name="password" placeholder="Парола" required />

      <div class="g-recaptcha" data-sitekey="6LdguQQrAAAAAGpftJEG4h_lhUjXK_AbBFFpemt-"></div>
      <button type="submit">Регистрация</button>
    </form>

    <p style="text-align: center; margin-top: 20px">
      Вече имате акаунт? <a href="login.html">Влезте тук</a>
    </p>
  </div>

  <script>
    function getCookie(name) {
      const cookies = document.cookie.split('; ');
      for (let c of cookies) {
        const [key, val] = c.split('=');
        if (key === name) return val ? decodeURIComponent(val) : null;
      }
      return null;
    }
  
    const message = getCookie("form_message");
    const type = getCookie("form_type");
  
    if (message) {
      const box = document.getElementById("message");
      box.textContent = message;
      box.classList.remove("hidden");
      box.classList.add(type === "success" ? "success" : "error");
  
      // Изчистване на бисквитките
      document.cookie = "form_message=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
      document.cookie = "form_type=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;";
    }
  </script>
</body>
</html>
